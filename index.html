<!DOCTYPE html>
<html lang="zh-CN">

<head>
<script>
  (function() {
    const saved = localStorage.getItem("themeMode");
    if (saved === "dark") {
      // 1. å…ˆç»™ <html> åŠ  dark-mode
      document.documentElement.classList.add("dark-mode");

      // 2. body è¿˜æ²¡ç”Ÿæˆï¼Œç”¨ rAF ç­‰å¾…
      const applyDark = () => {
        if (document.body) {
          document.body.classList.add("dark-mode");
        } else {
          requestAnimationFrame(applyDark);
        }
      };
      applyDark();
    }
  })();
</script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç³»ç»Ÿå…¥å£</title>


    <link rel="stylesheet" href="assets/css/common.css">

    <style>
        body {
    padding-top: 70px;
    height: 100vh;              /* å…³é”®ï¼šé”å®šè§†å£é«˜åº¦ */
    overflow: hidden;           /* ç¦æ­¢å‡ºç°ä¸Šä¸‹æ»šåŠ¨æ¡ */
}

/* å¤–å±‚å®¹å™¨ï¼šè®©å››ä¸ªå¡ç‰‡æ•´ä½“å±…ä¸­åä¸Š */
.module-wrapper {
    height: calc(100vh - 70px); /* é¡¶éƒ¨æ  70pxï¼Œå‰©ä½™åŒºåŸŸå®Œå…¨å æ»¡ */
    display: flex;
    align-items: flex-start;    /* é ä¸Šå¯¹é½ */
    justify-content: center;
    padding-top: 80px;          /* æ§åˆ¶â€œåä¸Šâ€çš„è·ç¦»ï¼Œå¯å¾®è°ƒ */
    box-sizing: border-box;
}

/* å››ä¸ªå¡ç‰‡å›ºå®šä¸€è¡Œï¼Œä¸å…è®¸æ¢è¡Œ */
.module-grid {
    display: flex;
    flex-direction: row;
    justify-content: center;
    gap: 26px;

    width: 100%;
    max-width: 1100px;
    padding: 0 20px;

    flex-wrap: nowrap; /* ç¦æ­¢æ¢è¡Œ */
}

/* å¡ç‰‡ï¼šåšçŸ®ä¸€ç‚¹ + å®Œå…¨å±…ä¸­å¯¹é½ */
.module-card {
    width: 230px;
    height: 160px;

    background: var(--card-bg, #ffffff);
    border-radius: 18px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, .06);
    border: 1px solid var(--border-color, #e5e5e5);

    cursor: pointer;
    transition: all .25s ease;

    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
}

.module-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 14px 32px rgba(0, 0, 0, .10);
}

/* æ·±è‰²æ¨¡å¼ */
body.dark-mode .module-card {
    background: #1f2933;
    border-color: #3b4252;
    box-shadow: 0 10px 30px rgba(0, 0, 0, .6);
}

/* å›¾æ ‡å— */
.module-icon-wrap {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    color: #fff;
    margin-bottom: 8px;
}

/* å›¾æ ‡é¢œè‰² */
.module-icon-orders { background: linear-gradient(135deg, #4e73df, #1cc8ff); }
.module-icon-finance { background: linear-gradient(135deg, #1cc88a, #17a673); }
.module-icon-staff { background: linear-gradient(135deg, #f6c23e, #f4b619); }
.module-icon-work { background: linear-gradient(135deg, #e74a3b, #f06a6a); }

/* æ·±è‰²æ¨¡å¼å›¾æ ‡ */
body.dark-mode .module-icon-orders { background: linear-gradient(135deg, #6c8bff, #4aa8ff); }
body.dark-mode .module-icon-finance { background: linear-gradient(135deg, #4fd6a8, #2fbf8a); }
body.dark-mode .module-icon-staff { background: linear-gradient(135deg, #ffd56a, #f4c542); }
body.dark-mode .module-icon-work { background: linear-gradient(135deg, #ff7b6b, #ff5c5c); }

.module-title {
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 4px;
}

.module-sub {
    font-size: 12px;
    opacity: .65;
}

.hidden {
    display: none;
}
		
    </style>

</head>

<body>

    <!-- é¡¶éƒ¨æ ï¼ˆä¿æŒä¸å˜ï¼‰ -->
    <div id="topBar">
        <div class="topBar-inner">
            <h1 id="pageTitle">ç³»ç»Ÿå…¥å£</h1>

            <div class="userBar-inline">
                <div class="user-avatar" id="userAvatar">U</div>
                <span class="username" id="userName"></span>
                <span class="username" id="userRole" style="opacity: 0.7;"></span>
                <button class="logout-btn" onclick="logout()">é€€å‡º</button>
            </div>
        </div>
    </div>

    <!-- å››å¤§ç³»ç»Ÿæ¨¡å—ï¼šç¼©å°åçš„å›¾æ ‡å¡ç‰‡ï¼Œæ•´ä½“å±…ä¸­åä¸Š -->
    <div class="module-wrapper">
        <div class="module-grid">

            <div class="module-card hidden" onclick="enterProject()">
                <div class="module-icon-wrap module-icon-orders">ğŸ“¦</div>
                <div class="module-title">è®¢å•ç³»ç»Ÿ</div>
                <div class="module-sub">Order System</div>
            </div>

            <div class="module-card hidden" onclick="enterFinance()">
                <div class="module-icon-wrap module-icon-finance">ğŸ’°</div>
                <div class="module-title">è´¢åŠ¡ç³»ç»Ÿ</div>
                <div class="module-sub">Finance System</div>
            </div>

            <!-- äººå‘˜ç³»ç»Ÿï¼šé»˜è®¤éšè—ï¼Œåªæœ‰ admin / boss èƒ½çœ‹åˆ° -->
            <div class="module-card hidden" id="staffCard" onclick="enterStaff()">
                <div class="module-icon-wrap module-icon-staff">ğŸ‘¥</div>
                <div class="module-title">äººå‘˜ç³»ç»Ÿ</div>
                <div class="module-sub">Staff System</div>
            </div>

            <!-- å·¥ä½œæ±‡æŠ¥ï¼šæŒ‰è§’è‰²æ§åˆ¶æ˜¾ç¤º -->
            <div class="module-card hidden" id="workCard" onclick="enterWork()">
                <div class="module-icon-wrap module-icon-work">ğŸ“</div>
                <div class="module-title">å·¥ä½œæ±‡æŠ¥</div>
                <div class="module-sub">Work Report</div>
            </div>

        </div>
    </div>

    <!-- JS -->
    <script src="assets/js/common.js"></script>

    <script>
        if (!requireLogin()) throw new Error("Not logged in");

        function enterFinance() { location.href = "finance.html"; }
        function enterProject() { location.href = "project.html"; }
        function enterStaff() { location.href = "account.html"; }
        function enterWork() { location.href = "work.html"; }

        document.addEventListener("DOMContentLoaded", () => {
    const sessionUser = JSON.parse(sessionStorage.getItem("sessionUser") || "null");
    if (!sessionUser) return;

    const role = sessionUser.role;

    // â­ æ˜¾ç¤ºæ‰€æœ‰å¡ç‰‡
    document.querySelectorAll(".module-card").forEach(card => {
        card.classList.remove("hidden");
    });

    // â­ é™åˆ¶äººå‘˜ç³»ç»Ÿæƒé™ï¼šè´¢åŠ¡ / å‘˜å·¥ / å¤–åŒ…ä¸èƒ½ç‚¹å‡»
    if (role === "finance" || role === "staff" || role === "outsourcing") {
        staffCard.onclick = null;
        staffCard.title = "æ— æƒé™";
        staffCard.style.cursor = "not-allowed";
    }

    // â­ å·¥ä½œæ±‡æŠ¥æš‚æœªå¼€æ”¾ï¼šç¦æ­¢ç‚¹å‡» + æ‚¬åœæç¤º
    const workCard = document.getElementById("workCard");
    workCard.onclick = null;
    workCard.title = "æš‚æœªå¼€æ”¾";
    workCard.style.cursor = "not-allowed";
});

    </script>

</body>

</html>
